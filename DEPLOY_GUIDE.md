# YuwenChat è¶…çº§æ— è„‘éƒ¨ç½²æŒ‡å—

> **çœ‹è¿™é‡Œï¼** è¿™ä¸ªæ•™ç¨‹æŠŠä½ å½“æˆå®Œå…¨ä¸æ‡‚çš„å°ç™½ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†è¯´æ˜ï¼Œå¤åˆ¶ç²˜è´´å°±èƒ½å®Œæˆï¼

---

## ğŸ¯ éƒ¨ç½²å‰å¿…è¯»ï¼ˆ2åˆ†é’Ÿï¼‰

### è¿™ä¸ªé¡¹ç›®å’Œæ™®é€šç½‘ç«™çš„åŒºåˆ«

| æ™®é€š PHP ç½‘ç«™ | YuwenChatï¼ˆæœ¬é¡¹ç›®ï¼‰ |
|--------------|-------------------|
| æ–‡ä»¶æ‰”è¿›å»å°±èƒ½ç”¨ | éœ€è¦å®‰è£…ä¾èµ– + æ„å»º |
| ä¸éœ€è¦é¢å¤–è¿›ç¨‹ | éœ€è¦ PM2 è·‘åç«¯ |
| ç›´æ¥è®¿é—®æ–‡ä»¶ | éœ€è¦é…ç½®åå‘ä»£ç† |

### æ•´ä½“æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         éƒ¨ç½²æµç¨‹ï¼ˆå…±9æ­¥ï¼‰                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â‘  å®‰è£…å®å¡”   â†’   â‘¡ å®‰è£…PM2å’ŒNginx   â†’   â‘¢ ä¸Šä¼ ä»£ç             â”‚
â”‚                                                                 â”‚
â”‚       â†“                                                         â”‚
â”‚                                                                 â”‚
â”‚  â‘£ ç»ˆç«¯æ‰§è¡Œä¸€é”®å‘½ä»¤ï¼ˆå®‰è£…ä¾èµ–+æ„å»º+å¯åŠ¨ï¼‰                         â”‚
â”‚                                                                 â”‚
â”‚       â†“                                                         â”‚
â”‚                                                                 â”‚
â”‚  â‘¤ æ·»åŠ ç½‘ç«™   â†’   â‘¥ é…ç½®Nginx   â†’   â‘¦ åŸŸåè§£æ                 â”‚
â”‚                                                                 â”‚
â”‚       â†“                                                         â”‚
â”‚                                                                 â”‚
â”‚  â‘§ ç”³è¯·SSLè¯ä¹¦   â†’   â‘¨ å¼€æ”¾é˜²ç«å¢™ç«¯å£   â†’   å®Œæˆï¼              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šå‡†å¤‡å·¥ä½œ

## æ­¥éª¤ 1ï¸âƒ£ ä¹°æœåŠ¡å™¨

### å»å“ªä¹°ï¼Ÿ

| æœåŠ¡å•† | ç½‘å€ | ç‰¹ç‚¹ |
|-------|------|-----|
| é˜¿é‡Œäº‘ | aliyun.com | å›½å†…æœ€å¤§ï¼Œéœ€å¤‡æ¡ˆ |
| è…¾è®¯äº‘ | cloud.tencent.com | ä¾¿å®œï¼Œéœ€å¤‡æ¡ˆ |
| Vultr | vultr.com | å›½å¤–ï¼Œå…å¤‡æ¡ˆï¼Œå¯èƒ½è¢«å¢™ |

### ä¹°ä»€ä¹ˆé…ç½®ï¼Ÿ

```
æœ€ä½é…ç½®ï¼š1æ ¸ 1Gå†…å­˜ 1Må¸¦å®½ï¼ˆçº¦50å…ƒ/æœˆï¼‰
æ¨èé…ç½®ï¼š2æ ¸ 2Gå†…å­˜ 3Må¸¦å®½ï¼ˆçº¦100å…ƒ/æœˆï¼‰

âš ï¸ é‡è¦ï¼šç³»ç»Ÿä¸€å®šè¦é€‰ Ubuntu 22.04ï¼ä¸è¦é€‰ CentOSï¼
```

### ä¹°å®Œåè®°ä¸‹è¿™äº›ä¿¡æ¯

```
ğŸ“ è®°åœ¨è®°äº‹æœ¬é‡Œï¼š

æœåŠ¡å™¨IP: _______________ï¼ˆä¾‹å¦‚ï¼š47.98.123.456ï¼‰
rootå¯†ç : _______________ï¼ˆä¹°çš„æ—¶å€™è®¾ç½®çš„ï¼‰
```

---

## æ­¥éª¤ 2ï¸âƒ£ ä¹°åŸŸå

### å»å“ªä¹°ï¼Ÿ

å’ŒæœåŠ¡å™¨åŒä¸€å®¶ä¹°æœ€æ–¹ä¾¿ï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘éƒ½æœ‰ï¼‰

### ä¹°ä»€ä¹ˆåŸŸåï¼Ÿ

```
ä¾‹å¦‚ï¼šchat.shawntv.co
åç¼€ .com çº¦ 55å…ƒ/å¹´
åç¼€ .co çº¦ 20å…ƒ/å¹´
```

### ä¹°å®Œåè®°ä¸‹

```
ğŸ“ ä½ çš„åŸŸå: chat.shawntv.co
```

---

## æ­¥éª¤ 3ï¸âƒ£ å®‰è£…å®å¡”é¢æ¿

### 3.1 è¿æ¥åˆ°æœåŠ¡å™¨

**Windows ç”¨æˆ·ï¼š**
```
1. ä¸‹è½½ PuTTYï¼šhttps://www.putty.org
2. æ‰“å¼€ PuTTY
3. Host Name å¡«ä½ çš„æœåŠ¡å™¨IP
4. ç‚¹ Open
5. å¼¹çª—ç‚¹ Yes
6. login as: è¾“å…¥ root å›è½¦
7. Password: è¾“å…¥ä½ çš„å¯†ç ï¼ˆä¸æ˜¾ç¤ºæ˜¯æ­£å¸¸çš„ï¼‰å›è½¦
8. çœ‹åˆ° root@xxx:~# å°±æˆåŠŸäº†ï¼
```

**Mac ç”¨æˆ·ï¼š**
```
1. æ‰“å¼€ã€Œç»ˆç«¯ã€
2. è¾“å…¥ï¼šssh root@ä½ çš„æœåŠ¡å™¨IP
3. è¾“å…¥ yes å›è½¦
4. è¾“å…¥å¯†ç å›è½¦
5. çœ‹åˆ° root@xxx:~# å°±æˆåŠŸäº†ï¼
```

### 3.2 å®‰è£…å®å¡”

å¤åˆ¶ä¸‹é¢è¿™ä¸€æ•´æ¡å‘½ä»¤ï¼Œç²˜è´´åˆ°ç»ˆç«¯ï¼Œå›è½¦æ‰§è¡Œï¼š

```bash
wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh ed8484bec
```

ç­‰å¾… 2-5 åˆ†é’Ÿï¼Œå‡ºç°ä¸‹é¢çš„ä¿¡æ¯å°±å®‰è£…å¥½äº†ï¼š

```
==================================================================
Congratulations! Installed successfully!
==================================================================
å¤–ç½‘é¢æ¿åœ°å€: http://47.98.123.456:8888/abcdefgh
username: abcdefgh
password: 12345678
==================================================================

âš ï¸âš ï¸âš ï¸ é‡è¦ï¼æŠŠè¿™äº›ä¿¡æ¯æˆªå›¾æˆ–å¤åˆ¶ä¿å­˜ï¼âš ï¸âš ï¸âš ï¸
```

### 3.3 è®°ä¸‹å®å¡”ä¿¡æ¯

```
ğŸ“ å®å¡”é¢æ¿åœ°å€: ___________________________
ğŸ“ å®å¡”ç”¨æˆ·å: _______________
ğŸ“ å®å¡”å¯†ç : _______________
```

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šå®å¡”é¢æ¿æ“ä½œ

## æ­¥éª¤ 4ï¸âƒ£ ç™»å½•å®å¡” + å®‰è£…è½¯ä»¶

### 4.1 ç™»å½•å®å¡”é¢æ¿

```
1. æ‰“å¼€æµè§ˆå™¨
2. åœ°å€æ è¾“å…¥ä½ çš„å®å¡”é¢æ¿åœ°å€
3. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
4. ç™»å½•æˆåŠŸï¼

âš ï¸ é¦–æ¬¡ç™»å½•å¼¹å‡ºçš„ã€Œæ¨èå®‰è£…å¥—ä»¶ã€çª—å£ï¼Œç‚¹ Ã— å…³æ‰ï¼
```

### 4.2 å®‰è£… PM2 ç®¡ç†å™¨

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§èœå• â†’ã€Œè½¯ä»¶å•†åº—ã€

æ“ä½œæ­¥éª¤ï¼š
1. ç‚¹å‡»å·¦ä¾§ã€Œè½¯ä»¶å•†åº—ã€
2. æœç´¢æ¡†è¾“å…¥ã€ŒPM2ã€
3. æ‰¾åˆ°ã€ŒPM2ç®¡ç†å™¨ã€
4. ç‚¹å‡»å³è¾¹çš„ã€Œå®‰è£…ã€
5. å¼¹çª—ç‚¹ã€Œç¡®å®šã€
6. ç­‰å¾… 2-3 åˆ†é’Ÿ
7. çœ‹åˆ°ç»¿è‰²ã€Œè¿è¡Œä¸­ã€å°±æˆåŠŸäº†
```

### 4.3 å®‰è£… Nginx

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§èœå• â†’ã€Œè½¯ä»¶å•†åº—ã€

æ“ä½œæ­¥éª¤ï¼š
1. æœç´¢æ¡†è¾“å…¥ã€Œnginxã€
2. æ‰¾åˆ°ã€ŒNginxã€ï¼ˆä¸æ˜¯ OpenRestyï¼‰
3. ç‚¹å‡»ã€Œå®‰è£…ã€
4. ç‰ˆæœ¬é€‰ 1.24ï¼ˆæˆ–æœ€æ–°ï¼‰
5. å‹¾é€‰ã€Œæé€Ÿå®‰è£…ã€
6. ç‚¹ã€Œç¡®å®šã€
7. ç­‰å¾… 1-2 åˆ†é’Ÿå®Œæˆ
```

---

## æ­¥éª¤ 5ï¸âƒ£ ä¸Šä¼ é¡¹ç›®ä»£ç 

### 5.1 åˆ›å»ºç›®å½•

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§èœå• â†’ã€Œæ–‡ä»¶ã€

æ“ä½œæ­¥éª¤ï¼š
1. ç‚¹å‡»å·¦ä¾§ã€Œæ–‡ä»¶ã€
2. åœ°å€æ è¾“å…¥ï¼š/www/wwwroot
3. æŒ‰å›è½¦è¿›å…¥
4. ç‚¹å‡»ä¸Šæ–¹ã€Œæ–°å»ºç›®å½•ã€
5. åç§°è¾“å…¥ï¼šchat.shawntv.co
6. ç‚¹ã€Œç¡®å®šã€
```

### 5.2 ä¸Šä¼ ä»£ç 

**æ–¹æ³•Aï¼šä¸Šä¼ å‹ç¼©åŒ…ï¼ˆæ¨èå°ç™½ï¼‰**
```
1. æŠŠé¡¹ç›®æ‰“åŒ…æˆ .zip æ–‡ä»¶
2. åŒå‡»è¿›å…¥ chat.shawntv.co ç›®å½•
3. ç‚¹å‡»ä¸Šæ–¹ã€Œä¸Šä¼ ã€
4. é€‰æ‹©ä½ çš„ zip æ–‡ä»¶
5. ç­‰å¾…ä¸Šä¼ å®Œæˆ
6. å³é”®ç‚¹å‡» zip æ–‡ä»¶ â†’ã€Œè§£å‹ã€â†’ã€Œè§£å‹åˆ°å½“å‰ç›®å½•ã€
```

**æ–¹æ³•Bï¼šGit æ‹‰å–**
```
1. ç‚¹å‡»å·¦ä¾§ã€Œç»ˆç«¯ã€
2. æ‰§è¡Œå‘½ä»¤ï¼š

cd /www/wwwroot/chat.shawntv.co
git clone https://github.com/yuwenchat/2026-Rev.git .

æ³¨æ„æœ€åæœ‰ä¸ªç‚¹ï¼
```

### 5.3 ç¡®è®¤ä¸Šä¼ æˆåŠŸ

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§èœå• â†’ã€Œæ–‡ä»¶ã€â†’ /www/wwwroot/chat.shawntv.co/

ä½ åº”è¯¥çœ‹åˆ°è¿™äº›æ–‡ä»¶å¤¹ï¼š
âœ… client/      ï¼ˆå‰ç«¯ä»£ç ï¼‰
âœ… server/      ï¼ˆåç«¯ä»£ç ï¼‰
âœ… PLAN.md
âœ… README.md
```

---

## æ­¥éª¤ 6ï¸âƒ£ æ‰§è¡Œä¸€é”®éƒ¨ç½²å‘½ä»¤ â­æœ€å…³é”®çš„ä¸€æ­¥â­

### 6.1 æ‰“å¼€ç»ˆç«¯

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§èœå• â†’ã€Œç»ˆç«¯ã€
```

### 6.2 å¤åˆ¶ç²˜è´´è¿™ä¸€æ•´æ®µå‘½ä»¤

```bash
# ===== ä¸€é”®éƒ¨ç½²å‘½ä»¤ï¼ˆå…¨éƒ¨å¤åˆ¶ï¼Œç²˜è´´åˆ°ç»ˆç«¯ï¼Œå›è½¦æ‰§è¡Œï¼‰=====

cd /www/wwwroot/chat.shawntv.co && \
echo ">>> 1/5 åˆ›å»ºæ•°æ®ç›®å½•" && \
mkdir -p server/data && \
echo ">>> 2/5 å®‰è£…åç«¯ä¾èµ–ï¼ˆçº¦1-2åˆ†é’Ÿï¼‰" && \
cd server && npm install --registry=https://registry.npmmirror.com && \
echo ">>> 3/5 åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶" && \
cat > .env << 'EOF'
PORT=3000
NODE_ENV=production
JWT_SECRET=yuwenchat-secret-key-change-this-in-production
CLIENT_URL=https://chat.shawntv.co
DB_PATH=./data/chat.db
EOF
echo ">>> 4/5 å®‰è£…å‰ç«¯ä¾èµ–å¹¶æ„å»ºï¼ˆçº¦2-3åˆ†é’Ÿï¼‰" && \
cd ../client && npm install --registry=https://registry.npmmirror.com && npm run build && \
echo ">>> 5/5 å¯åŠ¨åç«¯æœåŠ¡" && \
cd ../server && pm2 delete yuwenchat 2>/dev/null; pm2 start src/index.js --name yuwenchat && pm2 save && \
echo "" && \
echo "========================================" && \
echo "âœ… éƒ¨ç½²å®Œæˆï¼" && \
echo "========================================"
```

### 6.3 æ‰§è¡Œç»“æœ

å¦‚æœçœ‹åˆ°è¿™ä¸ªï¼Œè¯´æ˜æˆåŠŸäº†ï¼š
```
========================================
âœ… éƒ¨ç½²å®Œæˆï¼
========================================
```

å¦‚æœæŠ¥é”™ï¼Œçœ‹ä¸‹é¢çš„ã€Œå¸¸è§é”™è¯¯å¤„ç†ã€ã€‚

### 6.4 éªŒè¯åç«¯è¿è¡ŒçŠ¶æ€

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š
```bash
pm2 list
```

åº”è¯¥çœ‹åˆ°ï¼š
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name     â”‚ status  â”‚ cpu     â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ yuwenchatâ”‚ online  â”‚ 0%      â”‚ 45mb     â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

status æ˜¾ç¤º online = æˆåŠŸï¼
status æ˜¾ç¤º errored = å¤±è´¥ï¼Œçœ‹æ—¥å¿—ï¼špm2 logs yuwenchat --err
```

---

## æ­¥éª¤ 7ï¸âƒ£ æ·»åŠ ç½‘ç«™ â­é‡ç‚¹çœ‹è¿™é‡Œâ­

### 7.1 æ‰“å¼€æ·»åŠ ç½‘ç«™ç•Œé¢

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§èœå• â†’ã€Œç½‘ç«™ã€â†’ ç‚¹å‡»ã€Œæ·»åŠ ç«™ç‚¹ã€
```

### 7.2 å¡«å†™ä¿¡æ¯ï¼ˆç…§ç€å¡«ï¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ·»åŠ ç«™ç‚¹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  åŸŸå:     chat.shawntv.co                                  â”‚
â”‚                                                             â”‚
â”‚  å¤‡æ³¨:     (å¯ä»¥ä¸å¡«)                                        â”‚
â”‚                                                             â”‚
â”‚  æ ¹ç›®å½•:   /www/wwwroot/chat.shawntv.co/client/dist         â”‚
â”‚            â†‘â†‘â†‘ é‡è¦ï¼ä¸€å®šè¦å¡«åˆ° distï¼â†‘â†‘â†‘                    â”‚
â”‚                                                             â”‚
â”‚  FTP:      ä¸åˆ›å»º                                            â”‚
â”‚                                                             â”‚
â”‚  æ•°æ®åº“:   ä¸åˆ›å»º                                            â”‚
â”‚                                                             â”‚
â”‚  PHPç‰ˆæœ¬:  çº¯é™æ€                                            â”‚
â”‚            â†‘ ä¸€å®šè¦é€‰ã€Œçº¯é™æ€ã€ï¼                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‚¹å‡»ã€Œæäº¤ã€
```

### 7.3 å¸¸è§é”™è¯¯

```
âŒ é”™è¯¯ï¼šæ ¹ç›®å½•å¡«æˆäº† /www/wwwroot/chat.shawntv.co
âœ… æ­£ç¡®ï¼šæ ¹ç›®å½•è¦å¡« /www/wwwroot/chat.shawntv.co/client/dist

âŒ é”™è¯¯ï¼šPHPç‰ˆæœ¬é€‰äº† PHP-74
âœ… æ­£ç¡®ï¼šPHPç‰ˆæœ¬è¦é€‰ã€Œçº¯é™æ€ã€
```

---

## æ­¥éª¤ 8ï¸âƒ£ é…ç½® Nginxï¼ˆåå‘ä»£ç†ï¼‰â­è¶…é‡è¦â­

### 8.1 æ‰“å¼€ç½‘ç«™è®¾ç½®

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§ã€Œç½‘ç«™ã€â†’ æ‰¾åˆ°ä½ çš„ç½‘ç«™ â†’ ç‚¹å‡»ç½‘ç«™åç§°ï¼ˆæˆ–ç‚¹ã€Œè®¾ç½®ã€ï¼‰
```

### 8.2 æ‰“å¼€é…ç½®æ–‡ä»¶

```
ğŸ“ ä½ç½®ï¼šç½‘ç«™è®¾ç½®çª—å£ â†’ å·¦ä¾§ç‚¹ã€Œé…ç½®æ–‡ä»¶ã€
```

### 8.3 ä¿®æ”¹é…ç½®ï¼ˆä¿ç•™ SSL è¯ä¹¦é…ç½®ï¼ï¼‰

âš ï¸ **ä¸è¦åˆ é™¤åŸæœ‰çš„ SSL é…ç½®ï¼** åªéœ€è¦ä¿®æ”¹/æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

æ‰¾åˆ°è¿™äº›å†…å®¹å¹¶ä¿®æ”¹ï¼š
```nginx
# 1. ä¿®æ”¹ root è·¯å¾„ï¼ˆåŠ ä¸Š /client/distï¼‰
root /www/wwwroot/chat.shawntv.co/client/dist;

# 2. ä¿®æ”¹ indexï¼ˆå»æ‰ phpï¼‰
index index.html index.htm;
```

ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾ä¸ªåˆé€‚çš„ä½ç½®ï¼ˆæ¯”å¦‚ `#REWRITE-END` åé¢ï¼‰ï¼Œæ·»åŠ è¿™ä¸‰æ®µï¼š

```nginx
    # ========== å‰ç«¯è·¯ç”±ï¼ˆVue Routerï¼‰==========
    location / {
        try_files $uri $uri/ /index.html;
    }

    # ========== åç«¯ API ä»£ç† ==========
    location /api {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # ========== WebSocket ä»£ç†ï¼ˆèŠå¤©å¿…é¡»ï¼‰==========
    location /socket.io {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
```

### 8.3.1 å®Œæ•´é…ç½®å‚è€ƒï¼ˆå·²æœ‰ SSL è¯ä¹¦çš„æƒ…å†µï¼‰

å¦‚æœä½ å·²ç»åœ¨å®å¡”ç”³è¯·äº† SSL è¯ä¹¦ï¼Œå®Œæ•´é…ç½®åº”è¯¥é•¿è¿™æ ·ï¼š

```nginx
server
{
    listen 80;
    listen 443 ssl http2 ;
    server_name chat.shawntv.co;
    index index.html index.htm;
    root /www/wwwroot/chat.shawntv.co/client/dist;

    #CERT-APPLY-CHECK--START
    # ç”¨äºSSLè¯ä¹¦ç”³è¯·æ—¶çš„æ–‡ä»¶éªŒè¯ç›¸å…³é…ç½® -- è¯·å‹¿åˆ é™¤
    include /www/server/panel/vhost/nginx/well-known/chat.shawntv.co.conf;
    #CERT-APPLY-CHECK--END

    #SSL-START SSLç›¸å…³é…ç½®ï¼Œè¯·å‹¿åˆ é™¤æˆ–ä¿®æ”¹ä¸‹ä¸€è¡Œå¸¦æ³¨é‡Šçš„404è§„åˆ™
    #error_page 404/404.html;
    ssl_certificate    /www/server/panel/vhost/cert/chat.shawntv.co/fullchain.pem;
    ssl_certificate_key    /www/server/panel/vhost/cert/chat.shawntv.co/privkey.pem;
    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    add_header Strict-Transport-Security "max-age=31536000";
    error_page 497  https://$host$request_uri;
    #SSL-END

    #ERROR-PAGE-START  é”™è¯¯é¡µé…ç½®ï¼Œå¯ä»¥æ³¨é‡Šã€åˆ é™¤æˆ–ä¿®æ”¹
    error_page 404 /404.html;
    #ERROR-PAGE-END

    #REWRITE-START URLé‡å†™è§„åˆ™å¼•ç”¨,ä¿®æ”¹åå°†å¯¼è‡´é¢æ¿è®¾ç½®çš„ä¼ªé™æ€è§„åˆ™å¤±æ•ˆ
    include /www/server/panel/vhost/rewrite/chat.shawntv.co.conf;
    #REWRITE-END

    # ========== å‰ç«¯è·¯ç”±ï¼ˆVue Routerï¼‰==========
    location / {
        try_files $uri $uri/ /index.html;
    }

    # ========== åç«¯ API ä»£ç† ==========
    location /api {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # ========== WebSocket ä»£ç†ï¼ˆèŠå¤©å¿…é¡»ï¼‰==========
    location /socket.io {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    #ç¦æ­¢è®¿é—®çš„æ–‡ä»¶æˆ–ç›®å½•
    location ~ ^/(\.user.ini|\.htaccess|\.git|\.env|\.svn|\.project|LICENSE|README.md)
    {
        return 404;
    }

    #ä¸€é”®ç”³è¯·SSLè¯ä¹¦éªŒè¯ç›®å½•ç›¸å…³è®¾ç½®
    location ~ \.well-known{
        allow all;
    }

    #ç¦æ­¢åœ¨è¯ä¹¦éªŒè¯ç›®å½•æ”¾å…¥æ•æ„Ÿæ–‡ä»¶
    if ( $uri ~ "^/\.well-known/.*\.(php|jsp|py|js|css|lua|ts|go|zip|tar\.gz|rar|7z|sql|bak)$" ) {
        return 403;
    }

    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
    {
        expires      30d;
        error_log /dev/null;
        access_log /dev/null;
    }

    location ~ .*\.(js|css)?$
    {
        expires      12h;
        error_log /dev/null;
        access_log /dev/null;
    }

    access_log  /www/wwwlogs/chat.shawntv.co.log;
    error_log  /www/wwwlogs/chat.shawntv.co.error.log;
}
```

### 8.4 ä¿å­˜é…ç½®

```
ç‚¹å‡»ã€Œä¿å­˜ã€æŒ‰é’®
```

### 8.5 æµ‹è¯•å¹¶é‡è½½ Nginx

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š
```bash
nginx -t && nginx -s reload
```

çœ‹åˆ°è¿™ä¸ªå°±æˆåŠŸäº†ï¼š
```
nginx: configuration file /www/server/nginx/conf/nginx.conf test is successful
```

---

## æ­¥éª¤ 9ï¸âƒ£ åŸŸåè§£æ

### 9.1 å»åŸŸåç®¡ç†åå°

```
é˜¿é‡Œäº‘ï¼šhttps://dc.console.aliyun.com
è…¾è®¯äº‘ï¼šhttps://console.cloud.tencent.com/cns
Cloudflareï¼šhttps://dash.cloudflare.com
```

### 9.2 æ·»åŠ è§£æè®°å½•

```
ç‚¹å‡» chat.shawntv.co â†’ ç‚¹å‡»ã€Œæ·»åŠ è®°å½•ã€

å¡«å†™ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®°å½•ç±»å‹:   A                                       â”‚
â”‚  ä¸»æœºè®°å½•:   chat                                    â”‚
â”‚  è®°å½•å€¼:     ä½ çš„æœåŠ¡å™¨IPï¼ˆä¾‹å¦‚ 47.98.123.456ï¼‰       â”‚
â”‚  TTL:        é»˜è®¤                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‚¹å‡»ã€Œç¡®å®šã€
```

### 9.3 ç­‰å¾…ç”Ÿæ•ˆ

```
åŸŸåè§£æéœ€è¦ 1-10 åˆ†é’Ÿç”Ÿæ•ˆ

éªŒè¯æ–¹æ³•ï¼ˆåœ¨ç»ˆç«¯æ‰§è¡Œï¼‰ï¼š
ping chat.shawntv.co

å¦‚æœæ˜¾ç¤ºä½ çš„æœåŠ¡å™¨IPï¼Œè¯´æ˜è§£ææˆåŠŸï¼
```

---

## æ­¥éª¤ ğŸ”Ÿ ç”³è¯· SSL è¯ä¹¦ï¼ˆHTTPSï¼‰

### 10.1 æ‰“å¼€ SSL è®¾ç½®

```
ğŸ“ ä½ç½®ï¼šç½‘ç«™ â†’ ä½ çš„ç½‘ç«™ â†’ è®¾ç½® â†’ å·¦ä¾§ç‚¹ã€ŒSSLã€
```

### 10.2 ç”³è¯·å…è´¹è¯ä¹¦

```
1. ç‚¹å‡»ã€ŒLet's Encryptã€é€‰é¡¹å¡
2. å‹¾é€‰ä½ çš„åŸŸå chat.shawntv.co
3. ç‚¹å‡»ã€Œç”³è¯·ã€
4. ç­‰å¾… 30 ç§’å·¦å³
5. ç”³è¯·æˆåŠŸåï¼Œå¼€å¯ã€Œå¼ºåˆ¶HTTPSã€å¼€å…³
```

### 10.3 å¦‚æœç”³è¯·å¤±è´¥

```
åŸå› 1: åŸŸåè§£æè¿˜æ²¡ç”Ÿæ•ˆ
â†’ ç­‰ 10 åˆ†é’Ÿå†è¯•

åŸå› 2: 80ç«¯å£æ²¡å¼€æ”¾
â†’ å¾€ä¸‹çœ‹ã€Œå¼€æ”¾é˜²ç«å¢™ç«¯å£ã€

åŸå› 3: åŸŸåæ²¡å¤‡æ¡ˆï¼ˆå›½å†…æœåŠ¡å™¨ï¼‰
â†’ å»åŸŸåæœåŠ¡å•†å¤‡æ¡ˆï¼Œæˆ–æ¢å›½å¤–æœåŠ¡å™¨
```

---

## æ­¥éª¤ 1ï¸âƒ£1ï¸âƒ£ å¼€æ”¾é˜²ç«å¢™ç«¯å£

### 11.1 å®å¡”é¢æ¿é˜²ç«å¢™

```
ğŸ“ ä½ç½®ï¼šå·¦ä¾§ã€Œå®‰å…¨ã€

æ·»åŠ ä»¥ä¸‹ç«¯å£ï¼š
- 80ï¼ˆHTTPï¼‰
- 443ï¼ˆHTTPSï¼‰
- 3000ï¼ˆåç«¯APIï¼Œå¯é€‰ï¼‰

æ“ä½œï¼šè¾“å…¥ç«¯å£å· â†’ ç‚¹ã€Œæ”¾è¡Œã€
```

### 11.2 äº‘æœåŠ¡å™¨å®‰å…¨ç»„

```
ğŸ“ ä½ç½®ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘æ§åˆ¶å° â†’ äº‘æœåŠ¡å™¨ â†’ å®‰å…¨ç»„

æ·»åŠ å…¥ç«™è§„åˆ™ï¼š
- ç«¯å£ 80ï¼Œæ¥æº 0.0.0.0/0
- ç«¯å£ 443ï¼Œæ¥æº 0.0.0.0/0
```

---

# ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®Œæˆï¼

## ğŸ‰ éªŒè¯éƒ¨ç½²æˆåŠŸ

### æ‰“å¼€æµè§ˆå™¨è®¿é—®

```
https://chat.shawntv.co
```

### æ£€æŸ¥æ¸…å•

| æ£€æŸ¥é¡¹ | æ­£å¸¸æƒ…å†µ | å¼‚å¸¸å¤„ç† |
|-------|---------|---------|
| é¡µé¢èƒ½æ‰“å¼€ | çœ‹åˆ°ç™»å½•é¡µé¢ | æ£€æŸ¥ Nginx é…ç½® |
| åœ°å€æ æœ‰ğŸ”’ | æ˜¾ç¤ºå°é”å›¾æ ‡ | æ£€æŸ¥ SSL è¯ä¹¦ |
| èƒ½æ³¨å†Œè´¦å· | æ³¨å†ŒæˆåŠŸè·³è½¬ | æ£€æŸ¥åç«¯ `pm2 list` |
| èƒ½ç™»å½• | è¿›å…¥èŠå¤©ç•Œé¢ | æ£€æŸ¥åç«¯æ—¥å¿— |
| èƒ½å‘æ¶ˆæ¯ | æ¶ˆæ¯å®æ—¶æ˜¾ç¤º | æ£€æŸ¥ WebSocket ä»£ç† |

---

# å¸¸è§é—®é¢˜é€ŸæŸ¥

## âŒ é¡µé¢æ‰“ä¸å¼€ / 502 é”™è¯¯

```bash
# æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
pm2 list

# å¦‚æœ status ä¸æ˜¯ onlineï¼Œé‡å¯
pm2 restart yuwenchat

# çœ‹é”™è¯¯æ—¥å¿—
pm2 logs yuwenchat --err
```

## âŒ é¡µé¢æ˜¾ç¤º 404

```bash
# æ£€æŸ¥ dist ç›®å½•æ˜¯å¦å­˜åœ¨
ls /www/wwwroot/chat.shawntv.co/client/dist/

# å¦‚æœä¸å­˜åœ¨ï¼Œé‡æ–°æ„å»º
cd /www/wwwroot/chat.shawntv.co/client
npm run build
```

## âŒ æ³¨å†Œ/ç™»å½•å¤±è´¥

```bash
# æµ‹è¯•åç«¯æ˜¯å¦æ­£å¸¸
curl http://127.0.0.1:3000/api/health

# åº”è¯¥è¿”å› {"status":"ok"}
# å¦‚æœä¸è¡Œï¼Œæ£€æŸ¥åç«¯æ—¥å¿—
pm2 logs yuwenchat
```

## âŒ æ¶ˆæ¯å‘ä¸å‡ºå»

æ£€æŸ¥ Nginx é…ç½®é‡Œçš„ `/socket.io` éƒ¨åˆ†æ˜¯å¦æ­£ç¡®é…ç½®

## âŒ npm install æŠ¥é”™

```bash
# ä½¿ç”¨å›½å†…é•œåƒ
npm config set registry https://registry.npmmirror.com

# å¦‚æœæ˜¯ç¼–è¯‘é”™è¯¯
apt update && apt install -y build-essential python3

# é‡æ–°å®‰è£…
npm install
```

---

# ä¸€é”®å‘½ä»¤é€ŸæŸ¥è¡¨

```bash
# ===== é‡æ–°éƒ¨ç½²ï¼ˆå¦‚æœæç ¸äº†ï¼‰=====
cd /www/wwwroot/chat.shawntv.co/server && npm install && \
cd ../client && npm install && npm run build && \
cd ../server && pm2 restart yuwenchat

# ===== æŸ¥çœ‹åç«¯çŠ¶æ€ =====
pm2 list

# ===== æŸ¥çœ‹åç«¯æ—¥å¿— =====
pm2 logs yuwenchat

# ===== é‡å¯åç«¯ =====
pm2 restart yuwenchat

# ===== æµ‹è¯•åç«¯ =====
curl http://127.0.0.1:3000/api/health

# ===== æµ‹è¯• Nginx é…ç½® =====
nginx -t

# ===== é‡è½½ Nginx =====
nginx -s reload
```

---

# ğŸ”„ æ‰‹åŠ¨æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

> å½“æœ‰æ–°åŠŸèƒ½å‘å¸ƒæ—¶ï¼ŒæŒ‰ç…§è¿™ä¸ªæŒ‡å—æ›´æ–°

## æ›´æ–°å‰å¿…è¯»

```
âš ï¸ æ›´æ–°ä¼šä¿ç•™ä½ çš„æ•°æ®ï¼
âœ… èŠå¤©è®°å½• - ä¸ä¼šä¸¢å¤±
âœ… ç”¨æˆ·è´¦å· - ä¸ä¼šä¸¢å¤±
âœ… å¥½å‹å…³ç³» - ä¸ä¼šä¸¢å¤±
âœ… å¤´åƒè®¾ç½® - ä¸ä¼šä¸¢å¤±

æ–°ç‰ˆæœ¬çš„æ•°æ®åº“å˜æ›´ä¼šè‡ªåŠ¨è¿ç§»ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ“ä½œï¼
```

## æ›´æ–°æ­¥éª¤ï¼ˆ3åˆ†é’Ÿæå®šï¼‰

### æ–¹æ³•ä¸€ï¼šä¸€é”®æ›´æ–°å‘½ä»¤ â­æ¨èâ­

æ‰“å¼€å®å¡”ç»ˆç«¯ï¼Œå¤åˆ¶ç²˜è´´è¿™æ•´æ®µå‘½ä»¤ï¼š

```bash
# ===== ä¸€é”®æ›´æ–°å‘½ä»¤ï¼ˆå…¨éƒ¨å¤åˆ¶ï¼Œç²˜è´´ï¼Œå›è½¦ï¼‰=====

cd /www/wwwroot/chat.shawntv.co && \
echo ">>> 1/5 å¤‡ä»½æ•°æ®åº“" && \
cp server/data/chat.db server/data/chat.db.backup.$(date +%Y%m%d_%H%M%S) && \
echo ">>> 2/5 æ‹‰å–æœ€æ–°ä»£ç " && \
git pull origin main && \
echo ">>> 3/5 æ›´æ–°åç«¯ä¾èµ–" && \
cd server && npm install --registry=https://registry.npmmirror.com && \
echo ">>> 4/5 æ›´æ–°å‰ç«¯å¹¶é‡æ–°æ„å»º" && \
cd ../client && npm install --registry=https://registry.npmmirror.com && npm run build && \
echo ">>> 5/5 é‡å¯åç«¯æœåŠ¡" && \
cd ../server && pm2 restart yuwenchat && \
echo "" && \
echo "========================================" && \
echo "âœ… æ›´æ–°å®Œæˆï¼åˆ·æ–°ç½‘é¡µå³å¯çœ‹åˆ°æ–°ç‰ˆæœ¬" && \
echo "========================================"
```

### æ–¹æ³•äºŒï¼šåˆ†æ­¥æ“ä½œï¼ˆå¦‚æœä½ æƒ³äº†è§£æ¯ä¸€æ­¥ï¼‰

#### ç¬¬1æ­¥ï¼šå¤‡ä»½æ•°æ®åº“ï¼ˆä¿é™©èµ·è§ï¼‰

```bash
cd /www/wwwroot/chat.shawntv.co
cp server/data/chat.db server/data/chat.db.backup
```

#### ç¬¬2æ­¥ï¼šæ‹‰å–æœ€æ–°ä»£ç 

```bash
cd /www/wwwroot/chat.shawntv.co
git pull origin main
```

å¦‚æœæç¤ºå†²çªï¼Œæ‰§è¡Œï¼š
```bash
git stash
git pull origin main
```

#### ç¬¬3æ­¥ï¼šæ›´æ–°åç«¯ä¾èµ–

```bash
cd /www/wwwroot/chat.shawntv.co/server
npm install
```

#### ç¬¬4æ­¥ï¼šé‡æ–°æ„å»ºå‰ç«¯

```bash
cd /www/wwwroot/chat.shawntv.co/client
npm install
npm run build
```

#### ç¬¬5æ­¥ï¼šé‡å¯åç«¯

```bash
pm2 restart yuwenchat
```

#### ç¬¬6æ­¥ï¼šéªŒè¯æ›´æ–°

```bash
# æ£€æŸ¥åç«¯çŠ¶æ€
pm2 list

# åº”è¯¥æ˜¾ç¤º status: online
```

ç„¶ååˆ·æ–°ç½‘é¡µï¼Œæ£€æŸ¥æ–°åŠŸèƒ½æ˜¯å¦ç”Ÿæ•ˆï¼

---

## æ›´æ–°åå¸¸è§é—®é¢˜

### âŒ git pull æŠ¥é”™ "local changes would be overwritten"

```bash
# æš‚å­˜æœ¬åœ°ä¿®æ”¹
git stash

# é‡æ–°æ‹‰å–
git pull origin main

# å¦‚æœéœ€è¦æ¢å¤æœ¬åœ°ä¿®æ”¹
git stash pop
```

### âŒ npm install æŠ¥é”™

```bash
# æ¸…é™¤ç¼“å­˜é‡è¯•
rm -rf node_modules package-lock.json
npm install --registry=https://registry.npmmirror.com
```

### âŒ é¡µé¢æ²¡å˜åŒ–

```bash
# 1. ç¡®è®¤å‰ç«¯é‡æ–°æ„å»ºäº†
ls -la /www/wwwroot/chat.shawntv.co/client/dist/

# 2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+R æˆ– Cmd+Shift+Rï¼‰

# 3. é‡è½½ Nginx
nginx -s reload
```

### âŒ åç«¯å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs yuwenchat --err --lines 50

# å¸¸è§åŸå› ï¼šä¾èµ–æ²¡è£…å¥½ï¼Œé‡æ–°å®‰è£…
cd /www/wwwroot/chat.shawntv.co/server
rm -rf node_modules
npm install
pm2 restart yuwenchat
```

---

## å›æ»šåˆ°æ—§ç‰ˆæœ¬ï¼ˆå¦‚æœæ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼‰

```bash
# æ¢å¤æ•°æ®åº“å¤‡ä»½
cd /www/wwwroot/chat.shawntv.co/server/data
cp chat.db.backup chat.db

# å›æ»šä»£ç åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
cd /www/wwwroot/chat.shawntv.co
git log --oneline -5  # æŸ¥çœ‹æœ€è¿‘5ä¸ªç‰ˆæœ¬
git checkout <ä¹‹å‰çš„ç‰ˆæœ¬å·>

# é‡æ–°æ„å»º
cd client && npm run build
cd ../server && pm2 restart yuwenchat
```

---

# ğŸ”§ å®Œå…¨é‡è£…æŒ‡å—ï¼ˆä»é›¶å¼€å§‹ï¼‰

> å¦‚æœä½ çš„ç³»ç»Ÿå‡ºäº†é—®é¢˜ï¼Œæˆ–è€…æƒ³å®Œå…¨é‡æ–°éƒ¨ç½²ï¼ŒæŒ‰ç…§è¿™ä¸ªæŒ‡å—æ“ä½œ

## ä»€ä¹ˆæ—¶å€™éœ€è¦å®Œå…¨é‡è£…ï¼Ÿ

```
ğŸ”¸ ç³»ç»Ÿé…ç½®æä¹±äº†ï¼Œæƒ³ä»å¤´æ¥
ğŸ”¸ æ¢äº†æ–°æœåŠ¡å™¨
ğŸ”¸ æ•°æ®ä¸éœ€è¦äº†ï¼Œæƒ³æ¸…ç©ºé‡æ¥
ğŸ”¸ é‡åˆ°æ— æ³•è§£å†³çš„é”™è¯¯
```

## å®Œå…¨é‡è£…æ­¥éª¤

### ğŸ“‹ ç¬¬ä¸€é˜¶æ®µï¼šæ¸…ç†æ—§ç¯å¢ƒï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰

å¦‚æœæœåŠ¡å™¨ä¸Šå·²ç»éƒ¨ç½²è¿‡ï¼Œå…ˆæ¸…ç†ï¼š

```bash
# ===== 1. åœæ­¢å¹¶åˆ é™¤æ—§çš„åç«¯æœåŠ¡ =====
pm2 stop yuwenchat 2>/dev/null
pm2 delete yuwenchat 2>/dev/null
pm2 save

# ===== 2. å¤‡ä»½æ•°æ®åº“ï¼ˆå¦‚æœéœ€è¦ä¿ç•™æ•°æ®ï¼‰=====
# å¦‚æœä½ æƒ³ä¿ç•™èŠå¤©è®°å½•å’Œç”¨æˆ·æ•°æ®ï¼š
cp /www/wwwroot/chat.shawntv.co/server/data/chat.db ~/chat.db.backup

# ===== 3. åˆ é™¤æ—§ä»£ç  =====
rm -rf /www/wwwroot/chat.shawntv.co

# ===== 4. åœ¨å®å¡”é¢æ¿åˆ é™¤æ—§ç½‘ç«™ =====
# æ‰‹åŠ¨æ“ä½œï¼šå®å¡” â†’ ç½‘ç«™ â†’ æ‰¾åˆ°ç½‘ç«™ â†’ åˆ é™¤ï¼ˆä¸è¦å‹¾é€‰åˆ é™¤ç›®å½•ï¼‰
```

### ğŸ“‹ ç¬¬äºŒé˜¶æ®µï¼šå…¨æ–°å®‰è£…

#### æ­¥éª¤ 1ï¼šç¡®è®¤åŸºç¡€è½¯ä»¶å·²å®‰è£…

åœ¨å®å¡”è½¯ä»¶å•†åº—ç¡®è®¤è¿™äº›å·²å®‰è£…ï¼š
- âœ… PM2 ç®¡ç†å™¨
- âœ… Nginx

å¦‚æœæ²¡è£…ï¼Œå‚è€ƒä¸Šé¢ã€Œæ­¥éª¤ 4ï¸âƒ£ã€å®‰è£…ã€‚

#### æ­¥éª¤ 2ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•å¹¶ä¸‹è½½ä»£ç 

```bash
# åˆ›å»ºç›®å½•
mkdir -p /www/wwwroot/chat.shawntv.co

# è¿›å…¥ç›®å½•
cd /www/wwwroot/chat.shawntv.co

# ä¸‹è½½ä»£ç ï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼ï¼‰
```

**æ–¹å¼Aï¼šä» GitHub å…‹éš†ï¼ˆæ¨èï¼‰**
```bash
git clone https://github.com/yuwenchat/2026-Rev.git .
```

**æ–¹å¼Bï¼šä¸Šä¼ å‹ç¼©åŒ…**
```
é€šè¿‡å®å¡”æ–‡ä»¶ç®¡ç†å™¨ä¸Šä¼  zip æ–‡ä»¶ï¼Œç„¶åè§£å‹åˆ°å½“å‰ç›®å½•
```

#### æ­¥éª¤ 3ï¼šä¸€é”®éƒ¨ç½²å‘½ä»¤

```bash
# ===== å¤åˆ¶è¿™æ•´æ®µå‘½ä»¤æ‰§è¡Œ =====

cd /www/wwwroot/chat.shawntv.co && \
echo ">>> 1/6 åˆ›å»ºæ•°æ®ç›®å½•" && \
mkdir -p server/data && \
echo ">>> 2/6 å®‰è£…åç«¯ä¾èµ–" && \
cd server && npm install --registry=https://registry.npmmirror.com && \
echo ">>> 3/6 åˆ›å»ºç¯å¢ƒå˜é‡" && \
cat > .env << 'EOF'
PORT=3000
NODE_ENV=production
JWT_SECRET=yuwenchat-secret-key-$(date +%s)-change-me
CLIENT_URL=https://chat.shawntv.co
DB_PATH=./data/chat.db
EOF
echo ">>> 4/6 å®‰è£…å‰ç«¯ä¾èµ–" && \
cd ../client && npm install --registry=https://registry.npmmirror.com && \
echo ">>> 5/6 æ„å»ºå‰ç«¯" && \
npm run build && \
echo ">>> 6/6 å¯åŠ¨åç«¯" && \
cd ../server && pm2 start src/index.js --name yuwenchat && pm2 save && \
echo "" && \
echo "========================================" && \
echo "âœ… éƒ¨ç½²å®Œæˆï¼" && \
echo "========================================" && \
echo "ä¸‹ä¸€æ­¥ï¼šé…ç½®ç½‘ç«™å’Œ Nginx"
```

**åŸŸåå·²è®¾ç½®ä¸º chat.shawntv.coï¼Œå¦‚éœ€ä¿®æ”¹è¯·ç¼–è¾‘ server/.env æ–‡ä»¶**

#### æ­¥éª¤ 4ï¼šæ¢å¤æ•°æ®ï¼ˆå¦‚æœä¹‹å‰å¤‡ä»½äº†ï¼‰

```bash
# å¦‚æœä½ ä¹‹å‰å¤‡ä»½äº†æ•°æ®åº“ï¼Œæƒ³æ¢å¤æ•°æ®ï¼š
cp ~/chat.db.backup /www/wwwroot/chat.shawntv.co/server/data/chat.db

# é‡å¯åç«¯è®©å®ƒè¯»å–æ•°æ®
pm2 restart yuwenchat
```

#### æ­¥éª¤ 5ï¼šé…ç½®ç½‘ç«™å’Œ Nginx

æŒ‰ç…§ä¸Šé¢çš„ã€Œæ­¥éª¤ 7ï¸âƒ£ã€å’Œã€Œæ­¥éª¤ 8ï¸âƒ£ã€æ“ä½œï¼š

1. **æ·»åŠ ç½‘ç«™**
   - åŸŸåï¼šchat.shawntv.co
   - æ ¹ç›®å½•ï¼š`/www/wwwroot/chat.shawntv.co/client/dist`
   - PHPç‰ˆæœ¬ï¼šçº¯é™æ€

2. **é…ç½® Nginx**
   - ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  API åå‘ä»£ç†å’Œ WebSocket æ”¯æŒ
   - å‚è€ƒã€Œæ­¥éª¤ 8ï¸âƒ£ã€çš„é…ç½®

3. **ç”³è¯· SSL è¯ä¹¦**
   - å®å¡” â†’ ç½‘ç«™ â†’ è®¾ç½® â†’ SSL â†’ Let's Encrypt â†’ ç”³è¯·

4. **æµ‹è¯•è®¿é—®**
   - æµè§ˆå™¨æ‰“å¼€ https://chat.shawntv.co
   - åº”è¯¥çœ‹åˆ°ç™»å½•é¡µé¢

---

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œé€é¡¹æ£€æŸ¥ï¼š

```
â–¡ pm2 list æ˜¾ç¤º yuwenchat çŠ¶æ€ä¸º online
â–¡ https://åŸŸå èƒ½æ‰“å¼€ç™»å½•é¡µé¢
â–¡ èƒ½æˆåŠŸæ³¨å†Œæ–°ç”¨æˆ·
â–¡ èƒ½æˆåŠŸç™»å½•
â–¡ èƒ½æ·»åŠ å¥½å‹
â–¡ èƒ½å‘é€æ¶ˆæ¯
â–¡ å¯¹æ–¹èƒ½æ”¶åˆ°æ¶ˆæ¯ï¼ˆå®æ—¶ï¼‰
â–¡ åˆ·æ–°é¡µé¢åèŠå¤©è®°å½•è¿˜åœ¨
```

å¦‚æœæŸé¡¹å¤±è´¥ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼š
```bash
# åç«¯æ—¥å¿—
pm2 logs yuwenchat --lines 100

# Nginx é”™è¯¯æ—¥å¿—
tail -100 /www/wwwlogs/chat.shawntv.co.error.log
```

---

# ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜åå°

> ç®¡ç†ç”¨æˆ·ã€ç¾¤ç»„ã€æŸ¥çœ‹ç»Ÿè®¡æ•°æ®

## é»˜è®¤ç®¡ç†å‘˜è´¦å·

```
âš ï¸âš ï¸âš ï¸ é¦–æ¬¡éƒ¨ç½²åå¿…é¡»ç«‹å³ä¿®æ”¹å¯†ç ï¼âš ï¸âš ï¸âš ï¸

ç”¨æˆ·å: admin
å¯†ç :   admin1

ç™»å½•åç¬¬ä¸€ä»¶äº‹ï¼šè®¾ç½® â†’ ä¿®æ”¹å¯†ç ï¼
```

## è®¿é—®ç®¡ç†åå°

1. ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
2. åœ¨èŠå¤©é¡µé¢å·¦ä¸Šè§’ä¼šçœ‹åˆ°ä¸€ä¸ª âš™ï¸ é½¿è½®å›¾æ ‡
3. ç‚¹å‡»è¿›å…¥ç®¡ç†åå°

æˆ–è€…ç›´æ¥è®¿é—®ï¼š`https://chat.shawntv.co/admin`

## ç®¡ç†åå°åŠŸèƒ½

### ğŸ“Š æ•°æ®ç»Ÿè®¡
- ç”¨æˆ·æ€»æ•°
- ç¾¤ç»„æ€»æ•°
- æ¶ˆæ¯æ€»æ•°
- å¥½å‹å…³ç³»æ•°
- æœ€è¿‘7å¤©æ–°å¢ç”¨æˆ·
- æœ€è¿‘7å¤©æ¶ˆæ¯æ•°

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
- æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…ï¼ˆå¥½å‹æ•°ã€ç¾¤ç»„æ•°ã€æ¶ˆæ¯æ•°ï¼‰
- ä¿®æ”¹ç”¨æˆ·å
- è®¾ç½®/å–æ¶ˆç®¡ç†å‘˜æƒé™
- åˆ é™¤ç”¨æˆ·

**âš ï¸ æ³¨æ„ï¼š** ä¸èƒ½é€šè¿‡ç®¡ç†åå°é‡ç½®ç”¨æˆ·å¯†ç ï¼å› ä¸ºç”¨æˆ·çš„ç§é’¥æ˜¯ç”¨å¯†ç åŠ å¯†çš„ï¼Œé‡ç½®å¯†ç ä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•è§£å¯†ä¹‹å‰çš„æ¶ˆæ¯ã€‚ç”¨æˆ·åªèƒ½è‡ªå·±åœ¨è®¾ç½®é‡Œä¿®æ”¹å¯†ç ã€‚

### ğŸ‘¥ ç¾¤ç»„ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰ç¾¤ç»„
- æŸ¥çœ‹ç¾¤ç»„æˆå‘˜æ•°å’Œæ¶ˆæ¯æ•°
- åˆ é™¤ç¾¤ç»„

### ğŸ’¬ æ¶ˆæ¯ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰æ¶ˆæ¯ï¼ˆåˆ†é¡µï¼‰
- åˆ é™¤æ¶ˆæ¯

**âš ï¸ æ³¨æ„ï¼š** æ¶ˆæ¯å†…å®¹æ˜¯åŠ å¯†çš„ï¼Œç®¡ç†å‘˜çœ‹åˆ°çš„æ˜¯åŠ å¯†åçš„ä¹±ç ï¼Œæ— æ³•æŸ¥çœ‹æ˜æ–‡ï¼

## æ·»åŠ å…¶ä»–ç®¡ç†å‘˜

1. è®©ç”¨æˆ·å…ˆæ³¨å†Œæ™®é€šè´¦å·
2. ç”¨ç°æœ‰ç®¡ç†å‘˜ç™»å½•ç®¡ç†åå°
3. åœ¨ç”¨æˆ·åˆ—è¡¨æ‰¾åˆ°è¯¥ç”¨æˆ·
4. ç‚¹å‡»ç¼–è¾‘ï¼Œå‹¾é€‰"ç®¡ç†å‘˜"
5. ä¿å­˜

## ç®¡ç†åå°æˆªå›¾ç¤ºæ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  YuwenChat ç®¡ç†åå°                          [è¿”å›èŠå¤©]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ç”¨æˆ·æ•°   â”‚  â”‚  ç¾¤ç»„æ•°   â”‚  â”‚  æ¶ˆæ¯æ•°   â”‚  â”‚  å¥½å‹æ•°   â”‚    â”‚
â”‚  â”‚    25    â”‚  â”‚    8     â”‚  â”‚   1,234  â”‚  â”‚    42    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  [ç”¨æˆ·ç®¡ç†]  [ç¾¤ç»„ç®¡ç†]  [æ¶ˆæ¯è®°å½•]  [ç³»ç»Ÿæ›´æ–°]              â”‚
â”‚                                                             â”‚
â”‚  ç”¨æˆ·åˆ—è¡¨                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç”¨æˆ·å      å¥½å‹ä»£ç      æ³¨å†Œæ—¶é—´        æ“ä½œ       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ admin      ABC123     2024-01-01    [ç¼–è¾‘] [åˆ é™¤]   â”‚   â”‚
â”‚  â”‚ alice      XYZ789     2024-01-02    [ç¼–è¾‘] [åˆ é™¤]   â”‚   â”‚
â”‚  â”‚ bob        DEF456     2024-01-03    [ç¼–è¾‘] [åˆ é™¤]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸŠ æ­å–œï¼

å¦‚æœä½ çœ‹åˆ°äº†èŠå¤©ç•Œé¢ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸäº†ï¼

è®°å¾—ï¼š
1. âš ï¸ **ç«‹å³ä¿®æ”¹ admin é»˜è®¤å¯†ç ï¼**
2. å®šæœŸå¤‡ä»½æ•°æ®åº“ï¼ˆ`/www/wwwroot/chat.shawntv.co/server/data/chat.db`ï¼‰
3. æœ‰é—®é¢˜çœ‹æ—¥å¿—ï¼š`pm2 logs yuwenchat`

äº«å—ä½ çš„ç§å¯†èŠå¤©åº”ç”¨å§ï¼

---

# ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

> äº†è§£æ¯ä¸ªæ–‡ä»¶å¤¹çš„ä½œç”¨ï¼Œæ–¹ä¾¿å¤‡ä»½å’Œæ’æŸ¥é—®é¢˜

## å®Œæ•´ç›®å½•ç»“æ„

```
/www/wwwroot/chat.shawntv.co/          # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ client/                             # ğŸ–¥ï¸ å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/                            # å‰ç«¯æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/                 # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/                      # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ stores/                     # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/                      # å·¥å…·å‡½æ•°ï¼ˆåŠ å¯†ã€APIç­‰ï¼‰
â”‚   â”œâ”€â”€ dist/                           # â­ æ„å»ºåçš„é™æ€æ–‡ä»¶ï¼ˆNginx æŒ‡å‘è¿™é‡Œï¼‰
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â””â”€â”€ assets/
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                             # ğŸ”§ åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/                            # åç«¯æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ index.js                    # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ db/                         # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â””â”€â”€ routes/                     # API è·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                           # ğŸ“¦ æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”‚   â””â”€â”€ chat.db                     # â­ SQLite æ•°æ®åº“ï¼ˆé‡è¦ï¼ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ uploads/                        # ğŸ“ ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ avatars/                    # ç”¨æˆ·å¤´åƒ
â”‚   â”‚   â”‚   â””â”€â”€ *.jpg, *.png
â”‚   â”‚   â””â”€â”€ *.jpg, *.png, *.pdf...      # èŠå¤©ä¸­å‘é€çš„æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ .env                            # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ DEPLOY_GUIDE.md                     # æœ¬éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ README.md                           # é¡¹ç›®è¯´æ˜
â””â”€â”€ PLAN.md                             # å¼€å‘è®¡åˆ’
```

## å…³é”®æ–‡ä»¶è¯´æ˜

### ğŸ’¾ æ•°æ®åº“æ–‡ä»¶ï¼ˆæœ€é‡è¦ï¼ï¼‰

```
server/data/chat.db
```

è¿™æ˜¯ SQLite æ•°æ®åº“æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- æ‰€æœ‰ç”¨æˆ·è´¦å·å’ŒåŠ å¯†åçš„å¯†ç 
- æ‰€æœ‰åŠ å¯†çš„èŠå¤©æ¶ˆæ¯
- å¥½å‹å…³ç³»å’Œå¥½å‹è¯·æ±‚
- ç¾¤ç»„ä¿¡æ¯å’Œæˆå‘˜å…³ç³»
- ç”¨æˆ·è®¾ç½®ï¼ˆå¤´åƒé¢œè‰²ç­‰ï¼‰

**âš ï¸ è¿™ä¸ªæ–‡ä»¶ä¸¢å¤± = æ‰€æœ‰æ•°æ®ä¸¢å¤±ï¼åŠ¡å¿…å®šæœŸå¤‡ä»½ï¼**

### ğŸ“ ä¸Šä¼ æ–‡ä»¶ç›®å½•

```
server/uploads/           # èŠå¤©é™„ä»¶ï¼ˆå›¾ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰
server/uploads/avatars/   # ç”¨æˆ·å¤´åƒ
```

ç”¨æˆ·å‘é€çš„å›¾ç‰‡å’Œæ–‡ä»¶éƒ½å­˜åœ¨è¿™é‡Œã€‚

### ğŸ–¥ï¸ å‰ç«¯æ„å»ºæ–‡ä»¶

```
client/dist/
```

è¿™æ˜¯ `npm run build` ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼ŒNginx ç›´æ¥è¯»å–è¿™ä¸ªç›®å½•ã€‚

### âš™ï¸ ç¯å¢ƒå˜é‡

```
server/.env
```

åŒ…å«ï¼š
- `PORT` - åç«¯ç«¯å£ï¼ˆé»˜è®¤3000ï¼‰
- `JWT_SECRET` - JWT å¯†é’¥
- `CLIENT_URL` - å‰ç«¯åœ°å€
- `DB_PATH` - æ•°æ®åº“è·¯å¾„

---

## ğŸ”’ éœ€è¦å¤‡ä»½çš„æ–‡ä»¶

åªéœ€è¦å¤‡ä»½è¿™ä¸¤ä¸ªç›®å½•ï¼Œå°±èƒ½å®Œæ•´æ¢å¤æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼š

```bash
# æ–¹æ³•1ï¼šå•ç‹¬å¤‡ä»½
cp server/data/chat.db ~/backup/
cp -r server/uploads/ ~/backup/

# æ–¹æ³•2ï¼šæ‰“åŒ…å¤‡ä»½ï¼ˆæ¨èï¼‰
tar -czvf ~/yuwenchat-backup-$(date +%Y%m%d).tar.gz \
    server/data/ \
    server/uploads/
```

### å¤‡ä»½å†…å®¹æ¸…å•

| æ–‡ä»¶/ç›®å½• | å†…å®¹ | æ˜¯å¦å¿…é¡»å¤‡ä»½ |
|----------|------|-------------|
| `server/data/chat.db` | ç”¨æˆ·ã€æ¶ˆæ¯ã€å¥½å‹ã€ç¾¤ç»„ | âœ… å¿…é¡» |
| `server/uploads/` | ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å’Œæ–‡ä»¶ | âœ… å¿…é¡» |
| `server/.env` | ç¯å¢ƒå˜é‡é…ç½® | âš¡ å»ºè®® |
| `client/dist/` | å‰ç«¯æ„å»ºæ–‡ä»¶ | âŒ å¯é‡æ–°æ„å»º |
| å…¶ä»–ä»£ç æ–‡ä»¶ | æºä»£ç  | âŒ å¯ä»Gitæ‹‰å– |

---

## ğŸ”„ æ¢å¤æ•°æ®

å¦‚æœéœ€è¦åœ¨æ–°æœåŠ¡å™¨æ¢å¤æ•°æ®ï¼š

```bash
# 1. å…ˆå®ŒæˆåŸºç¡€éƒ¨ç½²ï¼ˆå‚è€ƒä¸Šé¢çš„å®‰è£…æ­¥éª¤ï¼‰

# 2. åœæ­¢åç«¯
pm2 stop yuwenchat

# 3. æ¢å¤æ•°æ®åº“
cp ~/backup/chat.db /www/wwwroot/chat.shawntv.co/server/data/

# 4. æ¢å¤ä¸Šä¼ æ–‡ä»¶
cp -r ~/backup/uploads/* /www/wwwroot/chat.shawntv.co/server/uploads/

# 5. é‡å¯åç«¯
pm2 restart yuwenchat
```

---

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„ï¼ˆå‚è€ƒï¼‰

`chat.db` åŒ…å«ä»¥ä¸‹æ•°æ®è¡¨ï¼š

| è¡¨å | å†…å®¹ |
|-----|------|
| `users` | ç”¨æˆ·è´¦å·ã€åŠ å¯†å¯†ç ã€å…¬é’¥ã€å¥½å‹ä»£ç ã€å¤´åƒ |
| `messages` | åŠ å¯†çš„èŠå¤©æ¶ˆæ¯ |
| `friendships` | å¥½å‹å…³ç³»å’Œå¥½å‹è¯·æ±‚ |
| `groups` | ç¾¤ç»„ä¿¡æ¯ |
| `group_members` | ç¾¤ç»„æˆå‘˜ |
| `group_messages` | ç¾¤ç»„æ¶ˆæ¯ |

**æ³¨æ„ï¼š** æ¶ˆæ¯å†…å®¹æ˜¯ç«¯å¯¹ç«¯åŠ å¯†çš„ï¼Œå³ä½¿ç›´æ¥æŸ¥çœ‹æ•°æ®åº“ä¹Ÿæ— æ³•è¯»å–æ˜æ–‡ã€‚

